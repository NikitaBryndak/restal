<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Пошук турів — RestAL</title>
  <script>
    var osGeo = '';
    var osDefaultDeparture = 2025;
    var osDefaultDuration = '';
    var osDateFrom = '';
    var osDateTo = '';
    var osHotelCategory = '';
    var osFood = '';
    var osTransport = '';
    var osTarget = '';
    var osContainer = null;
    var osTourContainer = null;
    var osLang = 'ua';
    var osTourTargetBlank = false;
    var osOrderUrl = null;
    var osCurrency = 'converted';
    var osAutoStart = false;
  </script>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700&subset=cyrillic" rel="stylesheet" />
  <link rel="stylesheet" href="https://export.otpusk.com/os/onsite/form.css" type="text/css" />
  <link rel="stylesheet" href="https://export.otpusk.com/os/onsite/result.css" type="text/css" />
  <link rel="stylesheet" href="https://export.otpusk.com/os/onsite/tour.css" type="text/css" />
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html, body {
      font-family: 'Open Sans', sans-serif;
      background: transparent;
      overflow-x: hidden;
    }
    body { padding: 0; }
    .os-form, .os-results, .os-tour {
      max-width: 100% !important;
      width: 100% !important;
    }
  </style>
</head>
<body>
  <script>
    // Intercept "Замовити тур" button clicks (capture phase, runs before widget handlers)
    document.addEventListener('click', function(e) {
      var el = e.target;
      while (el && el !== document.body) {
        var text = el.textContent ? el.textContent.trim() : '';
        if (text === 'Замовити тур' && /^(A|BUTTON|DIV|SPAN)$/i.test(el.tagName)) {
          e.preventDefault();
          e.stopPropagation();
          e.stopImmediatePropagation();
          var codeMatch = document.body.textContent.match(/Код[:\s]*(\d+)/);
          var hotelEl = document.querySelector('.tour-name, .os-tour-name, h1, h2');
          window.parent.postMessage({
            type: 'otpusk-order',
            tourCode: codeMatch ? codeMatch[1] : '',
            hotelName: hotelEl ? hotelEl.textContent.trim() : ''
          }, '*');
          return false;
        }
        el = el.parentElement;
      }
    }, true);
  </script>
  <script src="https://api.otpusk.com/api/2.4/session?access_token=3f80a-01423-b3ca6-0bbab-1a284"></script>
  <script src="https://export.otpusk.com/js/onsite/"></script>
  <script src="https://export.otpusk.com/js/order"></script>
  <script>
    // Auto-expand "Розширений пошук" after widget initializes
    (function() {
      var done = false;
      function tryExpand() {
        if (done) return true;
        var walker = document.createTreeWalker(document.body, NodeFilter.SHOW_TEXT);
        while (walker.nextNode()) {
          var txt = walker.currentNode.nodeValue || '';
          if (txt.indexOf('озширений пошук') !== -1) {
            // Found the text node — click its parent element
            var target = walker.currentNode.parentElement;
            if (target) {
              target.click();
              done = true;
              return true;
            }
          }
        }
        return false;
      }
      // Use MutationObserver to catch it as soon as it renders
      var obs = new MutationObserver(function() {
        if (tryExpand()) obs.disconnect();
      });
      obs.observe(document.body, { childList: true, subtree: true });
      // Fallback timeouts
      setTimeout(tryExpand, 1000);
      setTimeout(tryExpand, 3000);
    })();
  </script>
  <script>
    (function () {
      var lastHeight = 0;
      function postHeight() {
        var height = Math.max(
          document.body.scrollHeight,
          document.body.offsetHeight,
          document.documentElement.scrollHeight,
          document.documentElement.offsetHeight
        );
        if (height !== lastHeight) {
          lastHeight = height;
          window.parent.postMessage({ type: 'otpusk-resize', height: height }, '*');
        }
      }
      setInterval(postHeight, 150);
      window.addEventListener('load', postHeight);
      window.addEventListener('resize', postHeight);
      if (window.MutationObserver) {
        new MutationObserver(postHeight).observe(document.body, {
          childList: true, subtree: true, attributes: true, characterData: true
        });
      }
    })();
  </script>
</body>
</html>
