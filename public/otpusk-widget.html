<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Пошук турів — RestAL</title>
  <script>
    var osGeo = '';
    var osDefaultDeparture = 2025;
    var osDefaultDuration = '';
    var osDateFrom = '';
    var osDateTo = '';
    var osHotelCategory = '';
    var osFood = '';
    var osTransport = '';
    var osTarget = '';
    var osContainer = null;
    var osTourContainer = null;
    var osLang = 'ua';
    var osTourTargetBlank = false;
    var osOrderUrl = null;
    var osCurrency = 'converted';
    var osAutoStart = false;
  </script>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700&subset=cyrillic" rel="stylesheet" />
  <link rel="stylesheet" href="https://export.otpusk.com/os/onsite/form.css" type="text/css" />
  <link rel="stylesheet" href="https://export.otpusk.com/os/onsite/result.css" type="text/css" />
  <link rel="stylesheet" href="https://export.otpusk.com/os/onsite/tour.css" type="text/css" />
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html, body {
      font-family: 'Open Sans', sans-serif;
      background: transparent !important;
      overflow-x: hidden;
      color: #e0e0e0;
    }
    body { padding: 0; }

    /* ============================================================
       DARK THEME OVERRIDES — targeting actual otpusk widget classes
       ============================================================ */

    /* === MAIN FORM CONTAINER (blue gradient → dark) === */
    body .new_f-container,
    body .new_f-container.ext-opened,
    body .new_os,
    body .new_f-ext-container .ui-slider-range,
    body .new_f-ext-container .slider-container .ui-widget-content {
      background: rgba(255, 255, 255, 0.04) !important;
      background-image: none !important;
      filter: none !important;
    }

    body .new_f-container {
      border-radius: 16px !important;
      border: 1px solid rgba(255, 255, 255, 0.08) !important;
    }

    /* Remove compass & plane background images */
    body .new_f-wrapper-bg-imgs {
      background: none !important;
      display: none !important;
    }

    /* Shadow above extended search */
    body .new_f-ext-container::before {
      background: none !important;
      background-image: none !important;
      filter: none !important;
      display: none !important;
    }

    /* === FORM TITLE "Пошук туру" === */
    body .new_f-title {
      color: #ffffff !important;
    }

    /* === FORM FIELDS (white → dark) === */
    body .new_f-form-field {
      background-color: rgba(0, 0, 0, 0.35) !important;
      border-color: rgba(255, 255, 255, 0.12) !important;
      border: 1px solid rgba(255, 255, 255, 0.12) !important;
    }

    body .new_f-form-field:hover,
    body .new_f-form-field:focus-within {
      border-color: rgba(15, 164, 230, 0.4) !important;
    }

    body .new_f-form-field::before {
      background-color: rgba(255, 255, 255, 0.1) !important;
    }

    body .new_f-form-field.to {
      border-left-color: rgba(255, 255, 255, 0.12) !important;
    }

    /* === FORM INPUT TEXT === */
    body .new_f-autocomplete-input,
    body .new_f-form .new_f-dropdown-btn,
    body .new_f-dropdown-btn span,
    body .new_f-dropdown-btn-text,
    body .new_input-mask {
      color: #e0e0e0 !important;
    }

    body .new_f-autocomplete-input::-webkit-input-placeholder {
      color: rgba(255, 255, 255, 0.35) !important;
    }
    body .new_f-autocomplete-input::-moz-placeholder {
      color: rgba(255, 255, 255, 0.35) !important;
    }
    body .new_f-autocomplete-input:-ms-input-placeholder {
      color: rgba(255, 255, 255, 0.35) !important;
    }

    /* Dropdown arrows */
    body .new_f-dropdown-btn::after,
    body .new_f-dropdown-btn .cnt::after {
      border-color: #0fa4e6 transparent transparent !important;
    }

    /* Counter button in "куда" field */
    body .new_f-dropdown-btn .cnt {
      background-color: rgba(255, 255, 255, 0.08) !important;
    }
    body .new_f-dropdown-btn .cnt:hover {
      background-color: rgba(255, 255, 255, 0.15) !important;
    }

    /* === SUBMIT / SEARCH BUTTON === */
    body .new_f-form .new_f-form-submit,
    body .new_not-found-message .os-order-form-submit_button,
    body .new_f-ext-container .new_f-dropdown-btn-apply {
      background: #0fa4e6 !important;
      color: #ffffff !important;
      border: none !important;
      border-radius: 0 12px 12px 0 !important;
      font-weight: 700 !important;
      transition: background 0.2s ease !important;
    }

    body .new_f-form .new_f-form-submit:hover,
    body .new_not-found-message .os-order-form-submit_button:hover,
    body .new_f-ext-container .new_f-dropdown-btn-apply:hover {
      background: #0d8ec7 !important;
    }

    /* Ripple animation border */
    body .hvr-ripple-out:before {
      border-color: #0d8ec7 !important;
    }

    /* === DATE PICKER FIELDS === */
    body .new_f-datepicker-wrap button {
      background: rgba(255, 255, 255, 0.08) !important;
      color: #e0e0e0 !important;
    }
    body .new_f-datepicker-wrap:hover button {
      background-color: rgba(255, 255, 255, 0.14) !important;
    }

    /* Date separator line */
    body .new_f-datepicker-wrap-2:before {
      background-color: rgba(255, 255, 255, 0.3) !important;
    }

    /* Calendar icon */
    body .new_f-search-dates-wrap svg {
      fill: #0fa4e6 !important;
    }

    /* Date popup tip */
    body .new_f-search-dates-popup {
      background-color: rgba(0, 0, 0, 0.6) !important;
      color: #e0e0e0 !important;
    }
    body .new_f-search-dates-popup:before,
    body .new_f-search-dates-popup:after {
      border-color: rgba(0, 0, 0, 0.6) transparent transparent !important;
    }

    /* === DROPDOWN MENUS === */
    body .new_f-dropdown-body,
    body #new_os-to .new_f-dropdown-body,
    body .new_f-dropdown-body-date,
    body #new_os-date-check .new_f-dropdown-body {
      background: #1a1a1a !important;
      background-color: #1a1a1a !important;
      border-color: rgba(255, 255, 255, 0.12) !important;
    }

    /* Dropdown items */
    body .new_f-dropdown-item {
      color: #e0e0e0 !important;
    }
    body .new_f-dropdown-item.selected {
      background-color: rgba(15, 164, 230, 0.2) !important;
      color: #ffffff !important;
    }
    body .new_f-dropdown-item:hover {
      background-color: rgba(15, 164, 230, 0.12) !important;
    }

    /* Dropdown top bar (blue header) */
    body .new_f-dropdown-body-top,
    body .new_t-tab-content-top,
    body .new_t-modal-body-top {
      background: #0d2137 !important;
      background-color: #0d2137 !important;
      color: #ffffff !important;
    }

    /* === AUTOCOMPLETE / COUNTRY LIST === */
    body #new_os-to .ui-autocomplete,
    body .new_f-container #new_os-to .ui-autocomplete {
      background: #1a1a1a !important;
    }

    body #cntList .ui-menu-item a *,
    body #new_os-to .ui-menu .ui-menu-item .label,
    body #new_os-to .ui-menu .ui-menu-item .label b,
    body #new_os-to .ui-menu .ui-menu-item .noplace {
      background: #1a1a1a !important;
      color: #e0e0e0 !important;
    }

    body #new_os-to .type-item {
      background-color: #111 !important;
      color: rgba(255, 255, 255, 0.5) !important;
    }

    body #new_os-to .ui-autocomplete .ui-menu-item .price-from {
      color: rgba(255, 255, 255, 0.4) !important;
    }

    body:not(.iOS) .new_f-container #new_os-to .ui-menu-item a:hover *,
    body:not(.iOS) .new_f-container #new_os-to .ui-menu .ui-menu-item .ui-corner-all:hover,
    body:not(.iOS) .new_f-container #new_os-to .ui-menu .ui-menu-item .ui-state-focus,
    body:not(.iOS) .new_f-container #new_os-to .ui-menu .ui-menu-item .ui-corner-all:hover *,
    body:not(.iOS) .new_f-container #new_os-to .ui-menu .ui-menu-item .ui-state-focus * {
      background: rgba(15, 164, 230, 0.12) !important;
    }

    body:not(.iOS) .new_f-container #new_os-to .ui-menu .ui-menu-item.active .ui-corner-all,
    body:not(.iOS) .new_f-container #new_os-to .ui-menu .ui-menu-item.active .ui-corner-all * {
      background: rgba(15, 164, 230, 0.2) !important;
    }

    body #cntList .ui-menu-item.active a,
    body #cntList .ui-menu-item.active a * {
      background: rgba(15, 164, 230, 0.2) !important;
    }

    /* Resort list */
    body #ctyList {
      background: #222 !important;
    }
    body #ctyList li {
      background-color: #222 !important;
      color: #e0e0e0 !important;
    }
    body #ctyList .labelName,
    body #ctyList .itemPrice {
      background: #222 !important;
      color: #e0e0e0 !important;
    }
    body #ctyList .ctyLists-wrapper {
      background: #222 !important;
    }
    body #ctyList .new_f-dropdown-body-bottom {
      background-color: #1a1a1a !important;
    }
    body #ctyList .new_f-dropdown-btn-apply {
      background-color: #0fa4e6 !important;
    }

    /* === CALENDAR / DATEPICKER === */
    body .new_f-dates-container#new_f-dates-container #ui-datepicker-div {
      background: #1e1e1e !important;
    }

    body .new_f-dates-container#new_f-dates-container #ui-datepicker-div::after {
      background-color: #111 !important;
    }

    body .new_f-dates-container#new_f-dates-container #ui-datepicker-div .ui-datepicker-header {
      color: #0fa4e6 !important;
    }

    body .new_f-dates-container#new_f-dates-container #ui-datepicker-div.ui-datepicker .ui-datepicker-title {
      color: #0fa4e6 !important;
    }

    body #new_f-dates-container.new_f-dates-container #ui-datepicker-div th {
      color: rgba(255, 255, 255, 0.4) !important;
    }

    body .new_f-dates-container#new_f-dates-container #ui-datepicker-div .ui-datepicker-calendar td {
      background: #2a2a2a !important;
      border-color: #1e1e1e !important;
    }

    body .new_f-dates-container#new_f-dates-container #ui-datepicker-div .ui-datepicker-calendar td a {
      color: #0fa4e6 !important;
    }

    body .new_f-dates-container#new_f-dates-container #ui-datepicker-div .ui-datepicker-calendar td span {
      color: #0fa4e6 !important;
    }

    body .new_f-dates-container#new_f-dates-container #ui-datepicker-div .ui-datepicker-calendar td.ui-state-disabled {
      background-color: #1e1e1e !important;
    }

    body .new_f-dates-container#new_f-dates-container #ui-datepicker-div .ui-datepicker-calendar td.ui-state-disabled .ui-state-default {
      color: rgba(255, 255, 255, 0.2) !important;
    }

    body .new_f-dates-container#new_f-dates-container #ui-datepicker-div .ui-datepicker-calendar td.ui-datepicker-other-month {
      background-color: #1e1e1e !important;
    }

    body .new_f-dates-container#new_f-dates-container #ui-datepicker-div .ui-datepicker-calendar td.ui-state-highlight {
      background-color: rgba(15, 164, 230, 0.15) !important;
    }

    body .new_f-dates-container#new_f-dates-container #ui-datepicker-div .ui-datepicker-calendar td.ui-datepicker-today .ui-state-default {
      background-color: rgba(15, 164, 230, 0.25) !important;
      color: #0fa4e6 !important;
    }

    /* Active calendar cell */
    body .new_f-dates-container#new_f-dates-container .new_first_calendar_open #ui-datepicker-div .ui-datepicker-calendar td.ui-state-active.ui-state-highlight,
    body .new_f-dates-container#new_f-dates-container .new_second_calendar_open #ui-datepicker-div .ui-datepicker-calendar td.ui-state-active:not(.ui-datepicker-current-day),
    body .new_f-dates-container#new_f-dates-container .new_second_calendar_open #ui-datepicker-div .ui-datepicker-calendar td.ui-state-active.ui-state-highlight.ui-datepicker-current-day {
      background-color: #0fa4e6 !important;
    }

    /* Calendar navigation arrows */
    body .new_f-dates-container#new_f-dates-container #ui-datepicker-div .ui-datepicker-prev,
    body .new_f-dates-container#new_f-dates-container #ui-datepicker-div .ui-datepicker-next {
      filter: brightness(0) invert(1) !important;
    }

    /* === EXTENDED SEARCH SECTION === */
    body .new_f-ext-container {
      background: #111111 !important;
      background-color: #111111 !important;
      background-image: none !important;
      box-shadow: none !important;
    }

    body .ext-opened .new_f-ext-container {
      background: #111111 !important;
      background-color: #111111 !important;
      background-image: none !important;
    }

    /* Extended search toggle button */
    body .new_f-form .new_f-ext-btn,
    body .new_f-ext-btn-text {
      color: #0fa4e6 !important;
    }
    body .new_f-ext-btn-text::before {
      border-color: #0fa4e6 transparent transparent !important;
    }
    body .ext-opened .new_f-ext-btn-text::before {
      border-color: transparent transparent #0fa4e6 !important;
    }

    /* Extended search section titles */
    body .new_f-ext-bl-title {
      color: #0fa4e6 !important;
    }
    body .new_f-ext-bl-title span {
      color: rgba(255, 255, 255, 0.4) !important;
    }

    /* Extended search labels */
    body .new_f-ext-bl label {
      color: rgba(255, 255, 255, 0.7) !important;
    }

    body .new_f-label-name {
      color: #0fa4e6 !important;
    }

    /* Services / recommendations labels */
    body .new_f-services-label-wrap .new_f-services-label label,
    body .new_f-services-label-wrap .new_f-services-label span {
      color: rgba(255, 255, 255, 0.7) !important;
    }

    /* === CHECKBOXES (white bg → dark) === */
    body [class*='new_f-'] input[type="checkbox"] + *::before {
      background-color: rgba(255, 255, 255, 0.06) !important;
      border-color: rgba(255, 255, 255, 0.25) !important;
    }

    body .new_f-container label:hover input[type="checkbox"] + *::before {
      border-color: rgba(15, 164, 230, 0.5) !important;
    }

    /* === RADIO BUTTONS === */
    body [class*='new_f-'] input[type="radio"] + ::before,
    body .new_f-ext-col-recommend input[type="checkbox"] + ::before {
      background-color: rgba(255, 255, 255, 0.06) !important;
      border-color: rgba(255, 255, 255, 0.25) !important;
    }

    body [class*='new_f-'] input[type="radio"]:checked + ::before,
    body .new_f-ext-col-recommend input[type="checkbox"]:checked + ::before {
      border-color: #0fa4e6 !important;
      background: #0fa4e6 !important;
    }

    /* === SLIDER CONTROLS === */
    body .new_f-ext-container .ui-slider .ui-slider-handle {
      background: #1a1a1a !important;
      border-color: #0fa4e6 !important;
    }

    body .new_f-ext-container .ui-slider-range {
      background: linear-gradient(to right, #0fa4e6, #0d8ec7) !important;
      background-image: none; /* remove any svg fallback */
      border-radius: 4px !important;
    }

    body .new_f-ext-container .new_f-ext-bl-rat .ui-slider-range,
    body .new_f-ext-container .new_f-ext-bl-price .ui-widget-content {
      background: rgba(255, 255, 255, 0.12) !important;
    }

    /* Slider scale marks */
    body .new_f-ext-scale-item::before,
    body .new_f-ext-bl-cat label::before,
    body .new_f-ext-bl-food label::before,
    body .new_f-ext-bl-price .slider-container::before,
    body .new_f-ext-bl-price .slider-container::after {
      background: rgba(255, 255, 255, 0.2) !important;
    }

    /* Scale / price input */
    body .new_f-ext-bl-price .slider-container input {
      color: rgba(255, 255, 255, 0.7) !important;
      background: none !important;
    }

    /* Rating scale items text */
    body .new_f-ext-scale-item {
      color: rgba(255, 255, 255, 0.5) !important;
    }

    /* === PEOPLE SELECTOR === */
    body .new_f-people-item {
      color: rgba(255, 255, 255, 0.6) !important;
    }
    body .new_f-people-item:hover {
      background-color: rgba(255, 255, 255, 0.08) !important;
      color: #e0e0e0 !important;
    }
    body .new_f-people-item.active {
      background-color: #0fa4e6 !important;
      color: #ffffff !important;
    }

    /* People title */
    body .new_f-people-title {
      color: rgba(255, 255, 255, 0.7) !important;
    }

    /* Children accordion */
    body .new_f-children-accordion-btn {
      border-color: rgba(255, 255, 255, 0.15) !important;
      color: rgba(255, 255, 255, 0.7) !important;
      background: rgba(255, 255, 255, 0.04) !important;
    }
    body .new_f-children-accordion-btn::after {
      border-color: rgba(255, 255, 255, 0.4) transparent transparent !important;
    }
    body .new_f-children-accordion-btn.active::after {
      border-color: transparent transparent rgba(255, 255, 255, 0.4) !important;
    }
    body .new_f-children-accordion-btn.disabled {
      color: rgba(255, 255, 255, 0.25) !important;
      border-color: rgba(255, 255, 255, 0.08) !important;
    }
    body .new_f-children-accordion-body {
      background: rgba(255, 255, 255, 0.04) !important;
      border-color: rgba(255, 255, 255, 0.1) !important;
    }

    body .new_f-children-list-item {
      background: #0fa4e6 !important;
      color: #ffffff !important;
    }
    body .new_f-children-age-item:hover {
      background: #0fa4e6 !important;
      color: #ffffff !important;
    }

    /* Duration dropdown items */
    body .duration .new_f-dropdown-item {
      color: #e0e0e0 !important;
    }
    body .duration .new_f-dropdown-item .new_f-duration-days {
      color: rgba(255, 255, 255, 0.4) !important;
    }

    /* Hide "(X днів)" days label everywhere in the widget */
    body .new_f-duration-days {
      display: none !important;
    }

    /* === CLEAR FILTERS BUTTON === */
    body .new_f-ext-clear-btn {
      color: #0fa4e6 !important;
    }

    /* === DROPDOWN BOTTOM BUTTONS (mobile) === */
    body .new_f-dropdown-btn-cancel {
      background-color: #1a1a1a !important;
      border-top-color: rgba(255, 255, 255, 0.1) !important;
      color: rgba(255, 255, 255, 0.7) !important;
    }
    body .new_f-dropdown-btn-apply {
      background-color: #0fa4e6 !important;
      color: #ffffff !important;
    }

    /* === GENERAL TEXT & FORM COLORS === */
    body .new_f-form {
      color: rgba(255, 255, 255, 0.7) !important;
    }

    /* ============================
       DARK THEME — RESULTS
       ============================ */

    /* Result container */
    body .new_r-container {
      color: #e0e0e0 !important;
    }

    /* Result card tiles */
    body .new_r-item {
      background-color: rgba(255, 255, 255, 0.04) !important;
      box-shadow: 0 0 12px rgba(0, 0, 0, 0.4) !important;
    }
    body .new_r-item-body {
      border-color: rgba(255, 255, 255, 0.08) !important;
    }
    body .new_r-item:hover .new_r-item-body {
      border-color: rgba(15, 164, 230, 0.4) transparent rgba(15, 164, 230, 0.4) transparent !important;
    }

    /* Hotel name */
    body .new_r-item-hotel {
      color: #ffffff !important;
    }

    /* Geo, info, food text */
    body .new_r-item-geo,
    body .new_r-item-info,
    body .new_r-item-from,
    body .new_r-item-date {
      color: rgba(255, 255, 255, 0.5) !important;
    }
    body .new_r-item .new_r-item-geo,
    body .new_r-item .new_r-item-geo span {
      color: #0fa4e6 !important;
    }
    body .new_r-item .new_r-item-geo span:only-child {
      color: rgba(255, 255, 255, 0.5) !important;
    }

    /* Price badge (orange → accent) */
    body .new_r-item .new_r-item-price {
      background: #0fa4e6 !important;
      border-color: #0fa4e6 !important;
      color: #fff !important;
    }
    body .new_r-item:hover .new_r-item-price {
      background: #fff !important;
      color: #0fa4e6 !important;
    }
    body .new_r-item-price-discount {
      color: #0fa4e6 !important;
    }
    body .new_r-item-price-discount::after {
      background: #0fa4e6 !important;
    }

    /* Rating circle */
    body .new_r-item-rating-container {
      background-color: rgba(255, 255, 255, 0.08) !important;
    }
    body .new_r-item-rating-container::after {
      background-color: #111 !important;
    }
    body .new_r-item-rating-value {
      color: #e0e0e0 !important;
    }
    body .new_r-item-rating-rev {
      color: #0fa4e6 !important;
    }

    /* Currency switch */
    body .new_r-currency-switch label input + span {
      background-color: rgba(255, 255, 255, 0.08) !important;
      color: rgba(255, 255, 255, 0.5) !important;
      box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.3) !important;
    }
    body .new_r-currency-switch label input:checked + span {
      background-color: #0fa4e6 !important;
      color: #fff !important;
      box-shadow: none !important;
    }

    /* Filter panel */
    body .new_r-panel {
      color: rgba(255, 255, 255, 0.7) !important;
    }
    body .new_r-filter {
      background-color: rgba(255, 255, 255, 0.08) !important;
      box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.3) !important;
    }
    body .new_r-filter-label {
      color: rgba(255, 255, 255, 0.6) !important;
    }
    body .new_r-filter-value {
      color: #0fa4e6 !important;
    }
    body .new_r-filter-reset {
      color: rgba(255, 255, 255, 0.5) !important;
    }
    body .new_r-filters-title {
      color: rgba(255, 255, 255, 0.7) !important;
    }
    body .new_r-filters-reset {
      color: #0fa4e6 !important;
    }

    /* "Show more" button */
    body .new_r-show-more-results {
      color: #0fa4e6 !important;
      background-color: transparent !important;
      border-color: #0fa4e6 !important;
    }
    body .new_r-show-more-results:hover {
      background-color: #0fa4e6 !important;
      color: #fff !important;
    }

    /* No results message */
    body .new_not-found-message .new_not-found-text {
      background: rgba(196, 85, 85, 0.2) !important;
      color: #e0e0e0 !important;
    }
    body .new_result-info {
      color: rgba(255, 255, 255, 0.7) !important;
    }
    body .new_result-info > .new_result-span {
      background: rgba(196, 85, 85, 0.15) !important;
      color: rgba(255, 255, 255, 0.8) !important;
    }
    body .new_result-info > .new_result-span > a,
    body .new_not-found-message a {
      color: #0fa4e6 !important;
    }

    /* Progress bar / loader */
    body .new_progress-container {
      background-color: rgba(255, 255, 255, 0.08) !important;
    }
    body .new_progress-item {
      background-color: #0fa4e6 !important;
      background-image: linear-gradient(to top, #0d8ec7, #0fa4e6) !important;
    }
    body .new_progressbar-text,
    body .new_progressbar-text span {
      color: rgba(255, 255, 255, 0.6) !important;
    }

    /* Operator logos dimmed */
    body .new_loading-logo .new_logo-image-wrap {
      opacity: 0.4 !important;
    }

    /* Not-found order form */
    body .new_not-found-message .os-order-input-name input,
    body .new_not-found-message .os-order-input-phone input,
    body .new_not-found-message .os-order-input-email input,
    body .new_not-found-message .os-order-input-comment textarea {
      background: rgba(0, 0, 0, 0.3) !important;
      border-color: rgba(255, 255, 255, 0.12) !important;
      color: #e0e0e0 !important;
    }
    body .new_not-found-message .os-order-form-submit_button {
      background: #0fa4e6 !important;
      color: #fff !important;
    }

    /* ============================
       DARK THEME — TOUR DETAIL
       ============================ */

    /* Container text */
    body .new_t-container {
      color: #e0e0e0 !important;
    }

    /* === TABS MENU === */
    body .new_t-menu-wrap {
      background: transparent !important;
    }
    body .new_t-menu-wrap::after {
      background: #0fa4e6 !important;
    }
    body .new_t-menu-item {
      color: #0fa4e6 !important;
      border-bottom-color: #0fa4e6 !important;
      background: transparent !important;
      background-color: transparent !important;
    }
    body .new_t-menu-item.selected {
      background: #0fa4e6 !important;
      background-color: #0fa4e6 !important;
      color: #fff !important;
    }
    body .new_t-menu-item:not(.selected) {
      background: rgba(255, 255, 255, 0.04) !important;
      background-color: rgba(255, 255, 255, 0.04) !important;
      color: #0fa4e6 !important;
    }
    body .new_t-menu-item:not(.selected):hover {
      background: rgba(15, 164, 230, 0.12) !important;
      background-color: rgba(15, 164, 230, 0.12) !important;
    }
    body .new_t-menu-item.selected::after {
      border-color: #0fa4e6 transparent transparent transparent !important;
    }
    body .new_t-menu-back-link {
      color: #0fa4e6 !important;
    }

    /* === HOTEL HEADER === */
    body .new_t-header-title {
      color: #ffffff !important;
    }
    body .new_t-header-geo {
      color: rgba(255, 255, 255, 0.5) !important;
    }
    body .new_t-header-geo.new_t-geo-with-map {
      color: #0fa4e6 !important;
    }
    body .new_t-header-geo.new_t-geo-with-map::after {
      background: #0fa4e6 !important;
    }
    body .new_t-header-geo svg {
      fill: #0fa4e6 !important;
    }
    body .new_t-header-desc {
      color: rgba(255, 255, 255, 0.7) !important;
    }
    body .new_t-header-top .new_r-item-rating-container .new_r-item-rating-value {
      color: #e0e0e0 !important;
    }

    /* === MAIN CONTENT AREA (light grey → dark) === */
    body .new_t-content {
      background-color: rgba(255, 255, 255, 0.03) !important;
    }

    body .new_t-notice-msg {
      background: rgba(244, 238, 216, 0.1) !important;
      color: rgba(255, 255, 255, 0.8) !important;
    }

    /* === TOUR TAB ROWS (Туристи, Дата, Тип кімнати, Послуги) === */
    /* The entire row */
    body .new_t-tour-tab-row {
      background: transparent !important;
      border-color: rgba(255, 255, 255, 0.08) !important;
    }
    body .new_t-tour-table,
    body .new_t-tour-table-wrap {
      background: transparent !important;
    }

    /* Left column (grey → dark) */
    body .new_t-tour-tab-col-1 {
      background: rgba(255, 255, 255, 0.05) !important;
      border-color: rgba(255, 255, 255, 0.08) !important;
    }
    body .new_t-tour-tab-col-1-title {
      color: rgba(255, 255, 255, 0.8) !important;
    }
    body .new_t-tour-tab-col-1 svg {
      fill: rgba(255, 255, 255, 0.3) !important;
    }

    /* Right column (white → dark) */
    body .new_t-tour-tab-col-2 {
      background-color: rgba(255, 255, 255, 0.02) !important;
      border-color: rgba(255, 255, 255, 0.08) !important;
      color: rgba(255, 255, 255, 0.7) !important;
    }
    body .new_t-tour-tab-col-2 .new_t-important {
      color: #0fa4e6 !important;
    }
    body .tourist-table .new_t-tour-tab-col-2,
    body .tourist-table .new_t-tour-tab-col-2 span {
      color: rgba(255, 255, 255, 0.7) !important;
    }

    /* Duration line & icons */
    body .new_t-duration-icons {
      background-color: rgba(255, 255, 255, 0.2) !important;
    }
    body .new_t-duration-icon {
      border-color: rgba(255, 255, 255, 0.3) !important;
      background-color: #111 !important;
    }
    body .new_t-duration-icon svg {
      fill: rgba(255, 255, 255, 0.35) !important;
    }
    body .new_t-duration-text span {
      color: rgba(255, 255, 255, 0.4) !important;
    }

    /* "Change" / expand button on rows (the > arrows) */
    body .new_t-change-btn,
    body .new_t-tour-tab-col .new_t-change-btn,
    body .new_t-tour-tab-col-2 .new_t-change-btn,
    body .new_t-change-btn-wrap,
    body .new_t-tour-tab-row .new_t-change-btn {
      background: rgba(255, 255, 255, 0.06) !important;
      background-color: rgba(255, 255, 255, 0.06) !important;
      border-left-color: rgba(255, 255, 255, 0.08) !important;
      border-color: rgba(255, 255, 255, 0.08) !important;
      color: #0fa4e6 !important;
    }
    body .new_t-change-btn svg,
    body .new_t-tour-tab-col .new_t-change-btn svg,
    body .new_t-tour-tab-row .new_t-change-btn svg {
      fill: #0fa4e6 !important;
    }
    body .new_t-change-btn:hover,
    body .new_t-tour-tab-col .new_t-change-btn:hover,
    body .new_t-tour-tab-row .new_t-change-btn:hover {
      background: rgba(15, 164, 230, 0.12) !important;
      background-color: rgba(15, 164, 230, 0.12) !important;
    }
    /* "Ще" text on change buttons */
    body .new_t-change-btn span,
    body .new_t-change-btn-text,
    body .new_t-change-btn .new_t-change-text {
      color: #0fa4e6 !important;
    }

    /* The entire right-side button/cell area in tour tab rows */
    body .new_t-tour-tab-col-2 > a,
    body .new_t-tour-tab-col > a,
    body .new_t-tour-tab-col-2 > div > a {
      background: rgba(255, 255, 255, 0.06) !important;
      color: #0fa4e6 !important;
    }
    body .new_t-tour-tab-col-2 > a:hover,
    body .new_t-tour-tab-col > a:hover {
      background: rgba(15, 164, 230, 0.12) !important;
    }

    /* Services (transfer, insurance, visa) icons */
    body .new_t-service-item {
      color: rgba(255, 255, 255, 0.7) !important;
    }

    /* === ORDER / BOOKING PANEL (right side) === */
    body .new_t-order-table {
      color: rgba(255, 255, 255, 0.5) !important;
    }
    body .new_t-order-price {
      color: #0fa4e6 !important;
    }
    body .new_t-order-price span {
      color: #0fa4e6 !important;
    }
    body .new_t-order-price__getCredit {
      color: #0fa4e6 !important;
    }
    body .new_t-order-price-descr {
      color: rgba(255, 255, 255, 0.4) !important;
    }
    body .new_t-order-code {
      color: rgba(255, 255, 255, 0.5) !important;
    }
    body .new_t-operator-name {
      color: rgba(255, 255, 255, 0.5) !important;
    }
    body .new_request-flight {
      color: #ff5555 !important;
    }

    /* Order button (orange → accent) */
    body .new_t-order-btn,
    body .new_t-order-btn-book {
      background-color: #0fa4e6 !important;
      color: #fff !important;
    }
    body .new_t-order-btn-book:hover {
      background-color: #0d8ec7 !important;
    }
    body .new_t-order-btn-gray {
      background-color: rgba(255, 255, 255, 0.08) !important;
      color: rgba(255, 255, 255, 0.6) !important;
    }
    body .new_t-order-return {
      border-color: #0fa4e6 !important;
      color: #0fa4e6 !important;
    }
    body .new_t-order-return svg {
      fill: #0fa4e6 !important;
    }

    /* === BOOK MODAL === */
    body .new_t-order-book-modal-body {
      background: #1a1a1a !important;
    }
    body .new_t-order-book-modal-header {
      background: #0d2137 !important;
    }

    /* === TAB CONTENT AREAS === */
    body .new_t-tab-content-top {
      background: #0d2137 !important;
      color: #fff !important;
    }

    /* Description tab */
    body .new_serv-cols .new_h6 {
      color: rgba(255, 255, 255, 0.8) !important;
    }
    body .new_serv-cols .new_serv-list > li {
      color: rgba(255, 255, 255, 0.6) !important;
    }
    body .new_serv-cols .new_serv-list > li::before {
      background-color: rgba(255, 255, 255, 0.4) !important;
    }
    body .new_serv-cols a {
      color: #0fa4e6 !important;
    }

    /* Reviews tab */
    body .new_t-tab-content.reviews .new_t-tab-content-body {
      background-color: transparent !important;
    }
    body .new_t-rating-tab-container {
      background-color: rgba(255, 255, 255, 0.03) !important;
    }
    body .new_t-rating-tab-container .big-rating .new_r-item-rating-rev {
      color: #0fa4e6 !important;
    }

    /* Map */
    body .new_t-map-wrapper {
      background-color: #1a1a1a !important;
    }
    body .new_map-infowindow-price {
      color: rgba(255, 255, 255, 0.6) !important;
    }

    /* === MODAL WINDOWS (dates, food, people) === */
    body .new_t-modal-body,
    body .new_modal-open .new_t-modal-body {
      background: #1a1a1a !important;
    }
    body .new_t-modal-body-top {
      background: #0d2137 !important;
      color: #fff !important;
    }

    /* Date modal */
    body .new_t-modal-body-item.date .new_t-modal-body-middle {
      background-color: #111 !important;
    }
    body .new_t-date-modal-table td {
      border-color: rgba(255, 255, 255, 0.08) !important;
      color: rgba(255, 255, 255, 0.7) !important;
    }
    body .new_t-date-modal-table td.selected {
      background-color: rgba(15, 164, 230, 0.1) !important;
    }
    body .new_t-date_link {
      background-color: rgba(255, 255, 255, 0.03) !important;
      color: #0fa4e6 !important;
    }
    body .new_t-date_link,
    body .new_t-date_link * {
      color: #0fa4e6 !important;
    }
    body .new_t-date_link.new_t-selected,
    body .new_t-date_link:hover {
      background-color: rgba(15, 164, 230, 0.15) !important;
    }
    body .new_t-date_link.selected {
      background-color: #0fa4e6 !important;
      color: #fff !important;
    }
    body .new_t-date_link.selected * {
      color: #fff !important;
    }

    /* Date change arrows */
    body .new_t-date-change {
      border-color: rgba(255, 255, 255, 0.1) !important;
    }
    body .new_t-date-change-top,
    body .new_t-date-change-bottom {
      background-color: rgba(255, 255, 255, 0.05) !important;
    }
    body .new_t-date-change-left,
    body .new_t-date-change-right {
      background-color: rgba(255, 255, 255, 0.03) !important;
    }
    body .new_t-date-change svg {
      fill: rgba(255, 255, 255, 0.4) !important;
    }

    /* Food / room modal */
    body .food .new_t-modal-table {
      background-color: #111 !important;
    }
    body .food .new_t-modal-table td {
      border-color: rgba(255, 255, 255, 0.08) !important;
      color: rgba(255, 255, 255, 0.7) !important;
    }
    body .food .new_t-modal-table .new_t-room-price {
      background-color: rgba(255, 255, 255, 0.03) !important;
    }
    body .food .new_t-modal-table .new_t-room-price a {
      color: rgba(255, 255, 255, 0.7) !important;
      box-shadow: 0 0 1px rgba(255, 255, 255, 0.2) !important;
    }
    body .food .new_t-modal-table .new_t-room-price.selected {
      background-color: #0fa4e6 !important;
    }
    body .food .new_t-modal-table .new_t-room-price.selected * {
      color: #fff !important;
    }
    body .food .new_t-modal-table tr:first-child td:first-child {
      background-color: rgba(255, 255, 255, 0.03) !important;
    }
    body .new_t-modal-room-title {
      color: #0fa4e6 !important;
    }
    body .new_t-food-abbr ~ span,
    body .new_t-modal-room-desc,
    body .new_t-modal-room-title span {
      color: rgba(255, 255, 255, 0.4) !important;
    }

    /* People change dropdown in tour */
    body .new_t-change-people .new_f-dropdown-body-wrap {
      background: #1a1a1a !important;
      color: rgba(255, 255, 255, 0.7) !important;
    }
    body .new_t-change-people .new_f-dropdown-btn-cancel {
      background-color: #222 !important;
      border-top-color: rgba(255, 255, 255, 0.1) !important;
      color: rgba(255, 255, 255, 0.6) !important;
    }
    body .new_t-change-people .new_f-dropdown-btn-apply {
      background-color: #0fa4e6 !important;
      color: #fff !important;
    }
    body .new_t-change-people .new_f-dropdown-list {
      color: rgba(255, 255, 255, 0.7) !important;
    }

    /* === ORDER FORM (fancybox popup) === */
    body .new_t-order-form-open .os-order-form-wrap {
      background: #1a1a1a !important;
    }
    body .os-order-header-title {
      color: #0fa4e6 !important;
    }
    body .new_t-order-form-open .os-order-form-wrap select {
      color: #e0e0e0 !important;
      background: rgba(0, 0, 0, 0.3) !important;
    }
    body .new_t-order-form-open .os-order-select-wrapper {
      background: rgba(0, 0, 0, 0.3) !important;
      border-color: rgba(255, 255, 255, 0.12) !important;
    }
    body .new_t-order-form-open .os-order-select-wrapper:after {
      background: rgba(0, 0, 0, 0.3) !important;
      color: #0fa4e6 !important;
    }
    body .new_t-order-form-open .os-order-user-contacts input,
    body .new_t-order-form-open .os-order-form-wrap textarea {
      color: #e0e0e0 !important;
      background: rgba(0, 0, 0, 0.3) !important;
      border-color: rgba(255, 255, 255, 0.12) !important;
    }
    body .new_t-order-form-open .os-order-first-title,
    body .new_t-order-form-open .os-order-and-title,
    body .new_t-order-form-open .os-order-second-title,
    body .new_t-order-form-open .os-order-input-dates label {
      color: rgba(255, 255, 255, 0.6) !important;
    }
    body .new_t-order-form-open .os-order-input-dates .os-order-input-wrapper {
      color: #e0e0e0 !important;
      background: rgba(0, 0, 0, 0.3) !important;
      border-color: rgba(255, 255, 255, 0.12) !important;
    }
    body .new_t-order-form-open .os-order-input-dates .os-order-input-wrapper:after {
      color: #0fa4e6 !important;
    }
    body .new_t-order-form-open .os-order-form-submit .os-order-form-submit_button {
      background: #0fa4e6 !important;
    }
    body .new_t-order-form-open .os-order-form-submit .os-order-form-submit_button:hover {
      background: #0d8ec7 !important;
    }

    /* Fancybox overlay */
    body .fancybox-overlay {
      background: rgba(0, 0, 0, 0.7) !important;
    }

    /* === VIEWED TOURS CAROUSEL === */
    body .new_t-similar-viewed-wrapper {
      color: rgba(255, 255, 255, 0.8) !important;
    }

    /* Credit modal */
    body .new_credit-modal-body {
      background-color: #1a1a1a !important;
    }
    body .new_credit-modal,
    body .new_credit-modal * {
      color: rgba(255, 255, 255, 0.7) !important;
    }
    body .new_credit-modal-row-count-item {
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3) !important;
      background: rgba(255, 255, 255, 0.04) !important;
    }
    body .new_credit-modal-row-count-item__btn {
      border-color: #0fa4e6 !important;
      background: transparent !important;
      color: #e0e0e0 !important;
    }
    body .new_credit-modal-select {
      border-color: rgba(255, 255, 255, 0.12) !important;
    }
    body .new_credit-modal-select::before {
      background: transparent !important;
    }
    body .new_credit-modal-select select {
      color: #e0e0e0 !important;
      background: transparent !important;
    }

    /* === SPINNER / LOADING === */
    body .new_spinner-wrap {
      color: #0fa4e6 !important;
    }

    /* === SCROLLBAR STYLING === */
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.15); border-radius: 3px; }
    ::-webkit-scrollbar-thumb:hover { background: rgba(255, 255, 255, 0.25); }

    /* Otpusk scrollbars */
    body #new_os-to .new_f-dropdown-body.popup #cntList::-webkit-scrollbar-track,
    body #ctyList .ctyLists-wrapper::-webkit-scrollbar-track {
      background-color: #1a1a1a !important;
    }
    body #new_os-to .new_f-dropdown-body.popup #cntList::-webkit-scrollbar-thumb,
    body #ctyList .ctyLists-wrapper::-webkit-scrollbar-thumb {
      background-color: rgba(255, 255, 255, 0.2) !important;
    }

    /* ============================
       PEOPLE/TOURISTS MODAL — compact layout & visible apply button
       ============================ */

    /* Bottom button bar in people modal — always visible, no scroll needed */
    body .new_t-change-people .new_f-dropdown-body-bottom {
      background: #1a1a1a !important;
      border-top: 1px solid rgba(255, 255, 255, 0.1) !important;
    }

    /* Ensure apply / cancel buttons are always visible */
    body .new_t-change-people .new_f-dropdown-btn-cancel,
    body .new_t-change-people .new_f-dropdown-btn-apply {
      visibility: visible !important;
      opacity: 1 !important;
    }

    /* Bottom buttons in all form dropdowns — dark theme */
    body .new_f-dropdown-body-bottom {
      background: #1a1a1a !important;
    }

    /* ============================
       ADDITIONAL DARK THEME — post-apply state & missing elements
       ============================ */

    /* Tour detail row containers — prevent white flash on reload */
    body .new_t-tour-tab-row {
      background: transparent !important;
    }
    body .new_t-content-wrap,
    body .new_t-tab-content-body {
      background-color: rgba(255, 255, 255, 0.03) !important;
    }

    /* Loading overlay during tour detail refresh */
    body .new_t-loading,
    body .new_t-overlay,
    body .new_t-modal-overlay,
    body .new_t-reloading,
    body .new_t-tour-reloading {
      background: rgba(0, 0, 0, 0.6) !important;
    }

    /* Sorting controls in results */
    body .new_r-sorting {
      color: rgba(255, 255, 255, 0.7) !important;
    }
    body .new_r-sorting-item {
      color: rgba(255, 255, 255, 0.5) !important;
    }
    body .new_r-sorting-item.active,
    body .new_r-sorting-item:hover {
      color: #0fa4e6 !important;
    }

    /* Result item expanded info */
    body .new_r-item-toggle,
    body .new_r-item-toggle-wrap {
      background-color: rgba(255, 255, 255, 0.03) !important;
      border-color: rgba(255, 255, 255, 0.08) !important;
    }
    body .new_r-item-toggle-btn {
      color: #0fa4e6 !important;
    }

    /* Tour detail — section headers on change */
    body .new_t-tour-tab-col {
      border-color: rgba(255, 255, 255, 0.08) !important;
    }
    body .new_t-tour-table {
      background: transparent !important;
    }

    /* Tooltip / popover elements */
    body .new_t-tooltip,
    body .new_t-popover,
    body .new_tooltip {
      background: #1a1a1a !important;
      color: #e0e0e0 !important;
      border-color: rgba(255, 255, 255, 0.12) !important;
    }

    /* All generic white backgrounds in the widget */
    body .new_t-wrapper,
    body .new_t-container-wrap {
      background: transparent !important;
    }

    /* Fix for any modal backdrop */
    body .new_modal-bg,
    body .modal-backdrop,
    body .new_layer-bg {
      background: rgba(0, 0, 0, 0.7) !important;
    }

    /* Flight details text */
    body .new_t-flight-text,
    body .new_t-flight-info {
      color: rgba(255, 255, 255, 0.6) !important;
    }
    body .new_t-flight-code,
    body .new_t-flight-time {
      color: #0fa4e6 !important;
    }

    /* Service items (transfer, insurance) */
    body .new_t-service-included {
      color: rgba(255, 255, 255, 0.5) !important;
    }

    /* Info / warning messages in tour detail */
    body .new_t-info-msg,
    body .new_t-warning-msg {
      background: rgba(255, 255, 255, 0.05) !important;
      color: rgba(255, 255, 255, 0.7) !important;
      border-color: rgba(255, 255, 255, 0.1) !important;
    }

    /* Catch-all for any remaining white text containers in tour detail */
    body .new_t-container *[style*="background: #fff"],
    body .new_t-container *[style*="background:#fff"],
    body .new_t-container *[style*="background: white"],
    body .new_t-container *[style*="background-color: #fff"],
    body .new_t-container *[style*="background-color:#fff"],
    body .new_t-container *[style*="background-color: white"] {
      background: rgba(255, 255, 255, 0.04) !important;
      color: #e0e0e0 !important;
    }

    /* Catch-all for result containers too */
    body .new_r-container *[style*="background: #fff"],
    body .new_r-container *[style*="background:#fff"],
    body .new_r-container *[style*="background: white"],
    body .new_r-container *[style*="background-color: #fff"],
    body .new_r-container *[style*="background-color:#fff"],
    body .new_r-container *[style*="background-color: white"] {
      background: rgba(255, 255, 255, 0.04) !important;
      color: #e0e0e0 !important;
    }

    /* === MOBILE OVERRIDES === */
    @media all and (max-width: 478px) {
      body .new_f-ext-container,
      body .new_f-dropdown-container:not(#new_os-date-check) .new_f-dropdown-body,
      body .new_layer-open .new_t-change-people .new_f-dropdown-body {
        background: #111111 !important;
      }

      body .new_f-dropdown-body-date .new_f-dropdown-body-top {
        background: #0d2137 !important;
      }

      body .new_f-dates-container#new_f-dates-container .mobile-calendar-days .mobile-calendar-day {
        color: rgba(255, 255, 255, 0.4) !important;
      }

      body .new_f-dates-container#new_f-dates-container .calendar-tip {
        background-color: #0fa4e6 !important;
      }

      /* Bottom buttons bar — sticky at bottom, always visible */
      body .new_t-change-people .new_f-dropdown-body-bottom,
      body .new_f-dropdown-body-bottom {
        position: sticky !important;
        bottom: 0 !important;
        z-index: 10 !important;
        padding: 10px 16px !important;
        background: #111111 !important;
        border-top: 1px solid rgba(255, 255, 255, 0.1) !important;
      }
    }

    /* ============================
       ADVANCED SEARCH PANEL VISIBILITY
       Desktop only — on mobile, let the widget's native toggle work
       ============================ */

    @media (min-width: 479px) {
      /* Force advanced search panel to be visible on desktop */
      .new_f-ext-container,
      .new_f-ext-body,
      div[class*="ext-container"],
      div[class*="ext-body"],
      .new_f-ext-wrap,
      .os-form-advanced,
      .os-form .advanced,
      .os-form-ext,
      .os-form-extra,
      .os-form-more,
      .os-form-toggle + div,
      .os-form-toggle + fieldset,
      .os-form-toggle ~ div[style*="display: none"],
      .os-form-toggle ~ div[style*="display:none"] {
        display: block !important;
        height: auto !important;
        overflow: visible !important;
        opacity: 1 !important;
        visibility: visible !important;
        max-height: none !important;
      }

      /* Collapsed state: hide extended search options when search is clicked */
      body.ext-collapsed .new_f-ext-container,
      body.ext-collapsed .new_f-ext-body,
      body.ext-collapsed div[class*="ext-container"],
      body.ext-collapsed div[class*="ext-body"],
      body.ext-collapsed .new_f-ext-wrap,
      body.ext-collapsed .os-form-advanced,
      body.ext-collapsed .os-form .advanced,
      body.ext-collapsed .os-form-ext,
      body.ext-collapsed .os-form-extra,
      body.ext-collapsed .os-form-more,
      body.ext-collapsed .os-form-toggle + div,
      body.ext-collapsed .os-form-toggle + fieldset {
        display: none !important;
        height: 0 !important;
        overflow: hidden !important;
        opacity: 0 !important;
        visibility: hidden !important;
        max-height: 0 !important;
      }
    }
  </style>
</head>
<body>
  <script>
    // Intercept "Замовити тур" button clicks (capture phase, runs before widget handlers)
    document.addEventListener('click', function(e) {
      var el = e.target;
      while (el && el !== document.body) {
        var text = el.textContent ? el.textContent.trim() : '';
        if (text === 'Замовити тур' && /^(A|BUTTON|DIV|SPAN)$/i.test(el.tagName)) {
          e.preventDefault();
          e.stopPropagation();
          e.stopImmediatePropagation();
          var codeMatch = document.body.textContent.match(/Код[:\s]*(\d+)/);
          var hotelEl = document.querySelector('.tour-name, .os-tour-name, h1, h2');
          window.parent.postMessage({
            type: 'otpusk-order',
            tourCode: codeMatch ? codeMatch[1] : '',
            hotelName: hotelEl ? hotelEl.textContent.trim() : ''
          }, '*');
          return false;
        }
        el = el.parentElement;
      }
    }, true);
  </script>
  <script src="https://api.otpusk.com/api/2.4/session?access_token=3f80a-01423-b3ca6-0bbab-1a284"></script>
  <script src="https://export.otpusk.com/js/onsite/"></script>
  <script src="https://export.otpusk.com/js/order"></script>
  <script>
    // Auto-expand "Розширений пошук" after widget initializes (desktop only)
    (function() {
      var done = false;
      function tryExpand() {
        if (done) return true;
        // Skip auto-expand on mobile devices
        if (window.innerWidth <= 478) { done = true; return true; }

        // Common text variations for "Extended search"
        var searchTexts = ["Розширений пошук", "Расширенный поиск", "Extended search", "Параметри пошуку"];

        // Try multiple strategies to find the button
        var strategies = [
           function() {
              // 1. Try generic class names for the button
              return document.querySelector('.new_f-ext-btn, .new_f-more-btn, [class*="ext-btn"], [class*="more-btn"]');
           },
           function() {
              // 2. Try by text content (recursive)
              return findToggleByText(searchTexts);
           },
           function() {
              // 3. Fallback: Find ANY element containing the text and click it directly
              for (var i = 0; i < searchTexts.length; i++) {
                 var t = searchTexts[i].toLowerCase();
                 // Create XPath for text content matching (case insensitive using translate hack)
                 // Note: we need to careful with quotes in XPath
                 var xpath = "//*[text()[contains(translate(., 'ABCDEFGHIJKLMNOPQRSTUVWXYZАБВГДЕЄЖЗИІЇЙКЛМНОПРСТУФХЦЧШЩЬЮЯ', 'abcdefghijklmnopqrstuvwxyzabhgdeezzijklmnoprstufhcchshschyuya'), '" + t + "')]]";
                 try {
                     var result = document.evaluate(xpath, document.body, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null);
                     if (result.singleNodeValue) {
                        return result.singleNodeValue;
                     }
                 } catch(e) { console.error("XPath error", e); }
              }
              return null;
           }
        ];

        function findToggleByText(texts) {
          for (var i = 0; i < texts.length; i++) {
             var toggle = findToggle(texts[i]);
             if (toggle) return toggle;
          }
          return null;
        }

        // Helper to find valid toggle elements
        function findToggle(text) {
          var lowerText = text.toLowerCase();
          // Use TreeWalker ... (same as before)
          var treeWalker = document.createTreeWalker(document.body, NodeFilter.SHOW_TEXT, null, false);

          while(treeWalker.nextNode()) {
            var node = treeWalker.currentNode;
            if (node.textContent.toLowerCase().indexOf(lowerText) !== -1) {
                var element = node.parentElement;
                var toggle = element.closest('a, button, [class*="toggle"], [class*="more"], [class*="advanced"], [class*="ext-btn"], span[onclick], div[onclick]');

                if (toggle && toggle.offsetParent !== null) {
                   return toggle;
                }
            }
          }
          return null;
        }

        for (var i = 0; i < strategies.length; i++) {
          var toggle = strategies[i]();
          if (toggle) {
             // Dispatch a click event properly
             // ...
             // Check if it looks expanded already?
             // Maybe check if next sibling is visible?
             // But let's just click it.

             // For jQuery click
             if (window.jQuery) {
                window.jQuery(toggle).click();
                done = true;
                return true;
             }

             if (typeof toggle.click === 'function') {
                 toggle.click();
             }

             var event = new MouseEvent('click', {
                view: window,
                bubbles: true,
                cancelable: true
             });
             toggle.dispatchEvent(event);

             done = true;
             return true;
          }
        }

        return false;
      }

      // Observe DOM changes to catch when the widget loads
      var obs = new MutationObserver(function(mutations) {
        if (tryExpand()) {
           // Keep observing for a bit in case it re-renders
           setTimeout(() => obs.disconnect(), 2000);
        }
      });

      obs.observe(document.body, { childList: true, subtree: true });

      // Periodic checks as fallback
      var intervals = [500, 1000, 2000, 4000, 8000];
      intervals.forEach(function(t) {
        setTimeout(tryExpand, t);
      });

    })();

    // Collapse extended search options when the search button is clicked
    (function() {
      function attachSearchCollapse() {
        var searchBtn = document.querySelector(
          'button[type="submit"], input[type="submit"], .new_f-submit, .new_f-search-btn, ' +
          '[class*="submit"], [class*="search-btn"], .os-form button, .os-form input[type="submit"]'
        );

        if (!searchBtn) {
          // Also try finding by text content
          var btns = document.querySelectorAll('button, input[type="submit"], a.btn, [role="button"]');
          for (var i = 0; i < btns.length; i++) {
            var txt = (btns[i].textContent || btns[i].value || '').trim().toLowerCase();
            if (txt === 'знайти' || txt === 'пошук' || txt === 'найти' || txt === 'поиск' || txt === 'search') {
              searchBtn = btns[i];
              break;
            }
          }
        }

        if (searchBtn && !searchBtn._collapseAttached) {
          searchBtn._collapseAttached = true;
          searchBtn.addEventListener('click', function() {
            document.body.classList.add('ext-collapsed');
          });
          return true;
        }
        return false;
      }

      // Observe DOM for widget load, then attach
      var obs2 = new MutationObserver(function() {
        if (attachSearchCollapse()) {
          setTimeout(function() { obs2.disconnect(); }, 2000);
        }
      });
      obs2.observe(document.body, { childList: true, subtree: true });

      [500, 1000, 2000, 4000, 8000].forEach(function(t) {
        setTimeout(attachSearchCollapse, t);
      });
    })();
  </script>
  <script>
    // Fix inline styles: override white backgrounds & dark text for dark theme
    (function() {
      function fixStyles() {
        // Fix any elements with inline white backgrounds
        var whiteEls = document.querySelectorAll(
          '[style*="background: #fff"], [style*="background:#fff"], ' +
          '[style*="background: white"], [style*="background-color: #fff"], ' +
          '[style*="background-color:#fff"], [style*="background-color: white"], ' +
          '[style*="background: rgb(255"], [style*="background-color: rgb(255"]'
        );
        whiteEls.forEach(function(el) {
          // Only override if inside the widget containers
          if (el.closest('.new_t-container, .new_r-container, .new_f-container, .new_os')) {
            el.style.setProperty('background', 'rgba(255, 255, 255, 0.04)', 'important');
            el.style.setProperty('background-color', 'rgba(255, 255, 255, 0.04)', 'important');
            // Also fix text color if it's dark
            var color = window.getComputedStyle(el).color;
            if (color && (color === 'rgb(0, 0, 0)' || color === 'rgb(51, 51, 51)' || color === 'rgb(34, 34, 34)' || color === 'rgb(85, 85, 85)')) {
              el.style.setProperty('color', '#e0e0e0', 'important');
            }
          }
        });

        // Fix dark text elements inside tour container
        var darkTexts = document.querySelectorAll(
          '[style*="color: #333"], [style*="color:#333"], ' +
          '[style*="color: #000"], [style*="color:#000"], ' +
          '[style*="color: black"], [style*="color: rgb(0, 0, 0)"], ' +
          '[style*="color: rgb(51"], [style*="color: rgb(34"]'
        );
        darkTexts.forEach(function(el) {
          if (el.closest('.new_t-container, .new_r-container, .new_f-container, .new_os')) {
            el.style.setProperty('color', '#e0e0e0', 'important');
          }
        });

        // Fix gray/light backgrounds
        var grayEls = document.querySelectorAll(
          '[style*="background: #f"], [style*="background:#f"], ' +
          '[style*="background: #e"], [style*="background:#e"], ' +
          '[style*="background: #d"], [style*="background:#d"], ' +
          '[style*="background-color: #f"], [style*="background-color:#f"], ' +
          '[style*="background-color: #e"], [style*="background-color:#e"], ' +
          '[style*="background-color: #d"], [style*="background-color:#d"]'
        );
        grayEls.forEach(function(el) {
          if (el.closest('.new_t-container, .new_r-container, .new_f-container, .new_os')) {
            el.style.setProperty('background', 'rgba(255, 255, 255, 0.04)', 'important');
            el.style.setProperty('background-color', 'rgba(255, 255, 255, 0.04)', 'important');
          }
        });

        // Fix change buttons (>) — widget often sets white background inline
        var changeBtns = document.querySelectorAll(
          '.new_t-change-btn, [class*="change-btn"], ' +
          '.new_t-tour-tab-col-2 a, .new_t-tour-tab-row a'
        );
        changeBtns.forEach(function(el) {
          var bg = window.getComputedStyle(el).backgroundColor;
          // Check if it has a light/white background
          if (bg && bg !== 'transparent' && bg !== 'rgba(0, 0, 0, 0)') {
            var match = bg.match(/rgb\((\d+),\s*(\d+),\s*(\d+)/);
            if (match) {
              var r = parseInt(match[1]), g = parseInt(match[2]), b = parseInt(match[3]);
              // If it's a light color (luminance > 180), darken it
              if (r > 180 && g > 180 && b > 180) {
                el.style.setProperty('background', 'rgba(255, 255, 255, 0.06)', 'important');
                el.style.setProperty('background-color', 'rgba(255, 255, 255, 0.06)', 'important');
              }
            }
          }
        });

        // Fix any remaining elements in tour detail with computed light backgrounds
        var tourCols = document.querySelectorAll(
          '.new_t-tour-tab-col, .new_t-tour-tab-col-1, .new_t-tour-tab-col-2, ' +
          '.new_t-tour-tab-row, .new_t-tour-table'
        );
        tourCols.forEach(function(el) {
          var bg = window.getComputedStyle(el).backgroundColor;
          if (bg && bg !== 'transparent' && bg !== 'rgba(0, 0, 0, 0)') {
            var match = bg.match(/rgb\((\d+),\s*(\d+),\s*(\d+)/);
            if (match) {
              var r = parseInt(match[1]), g = parseInt(match[2]), b = parseInt(match[3]);
              if (r > 180 && g > 180 && b > 180) {
                el.style.setProperty('background-color', 'rgba(255, 255, 255, 0.04)', 'important');
              }
            }
          }
        });
      }

      // Run on DOM mutations (widget changes)
      if (window.MutationObserver) {
        var fixObs = new MutationObserver(function() {
          requestAnimationFrame(fixStyles);
        });
        fixObs.observe(document.body, { childList: true, subtree: true, attributes: true, attributeFilter: ['style', 'class'] });
      }

      // Also run periodically for good measure
      [300, 600, 1200, 2500, 5000].forEach(function(t) {
        setTimeout(fixStyles, t);
      });
      setInterval(fixStyles, 3000);
    })();
  </script>
  <script>
    (function () {
      var lastHeight = 0;
      var pendingFrame = null;
      var THRESHOLD = 30; // Only post if height changed by more than 30px

      function getHeight() {
        return Math.max(
          document.body.scrollHeight || 0,
          document.body.offsetHeight || 0,
          document.documentElement.scrollHeight || 0,
          document.documentElement.offsetHeight || 0
        );
      }

      function postHeight() {
        var height = getHeight();
        if (Math.abs(height - lastHeight) > THRESHOLD) {
          lastHeight = height;
          window.parent.postMessage({ type: 'otpusk-resize', height: height }, '*');
        }
      }

      // Debounced version that coalesces rapid mutations
      function schedulePost() {
        if (pendingFrame) return;
        pendingFrame = requestAnimationFrame(function() {
          pendingFrame = null;
          postHeight();
        });
      }

      // Poll less aggressively
      setInterval(postHeight, 500);
      window.addEventListener('load', postHeight);
      window.addEventListener('resize', postHeight);
      if (window.MutationObserver) {
        new MutationObserver(schedulePost).observe(document.body, {
          childList: true, subtree: true
        });
      }
    })();
  </script>
</body>
</html>
